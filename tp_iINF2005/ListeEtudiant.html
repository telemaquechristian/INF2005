<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta charset="utf-8">

		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title> Liste &eacute;tudiant </title>
		<meta name="description" content="">
		<meta name="author" content="">

		<meta name="viewport" content="width=device-width,initial-scale=1">

		<link rel="stylesheet" href="css/decorations.css">
		<link rel="stylesheet" href="css/courriel.css">
		<link rel="stylesheet" href="css/inscriptionEtAuthentification.css">
		<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
		<script type="text/javascript" src="js/listeEtudiants.js"></script>
		<script src="js/acces.js"></script>
		<script src="js/jquery-1.10.2.js"></script>
		<script src="js/jquery.cookie.js"></script>
		<script type="text/javascript">
			function ajouterEtudiant(chemin) {
 
				var xmlhttp = new XMLHttpRequest();
				xmlhttp.open("GET", chemin, true);
				var Students = [];
				localStorage.setItem("students", JSON.stringify(Students));
				xmlhttp.onreadystatechange = function() {

					if (xmlhttp.readyState == 4) {
						var xml = xmlhttp.responseXML;
						var docsnom = xml.getElementsByTagName("nom");
						var docsprenom = xml.getElementsByTagName("prenom");
						var docs = xml.getElementsByTagName("email");
						var docsmpd = xml.getElementsByTagName("motdepasse");
						var resultat = true;

						for ( i = 0; i < docs.length; i++) {
							nom = docsnom[i].firstChild.nodeValue;
							prenom = docsprenom[i].firstChild.nodeValue;
							mail = docs[i].firstChild.nodeValue;
							motdepasse = docsmpd[i].firstChild.nodeValue;

							//if (!(uniciteCourriel(mail, docs, (i + 1)))) {
							//	messageErreur(mail);
							//	resultat = false;
							//	break;
							//}

							Students = $.parseJSON(localStorage.getItem("students"));
							Students.push({
								'nom' : nom,
								'prenom' : prenom,
								'email' : mail,
								'motdepasse' : motdepasse,
							});

							localStorage.setItem("students", JSON.stringify(Students));

						}
					}

				};

				xmlhttp.send();

				
			}
			
		</script>
		<script >
			function listeEtudiant1() {

				ajouterEtudiant("listeEtudiant.xml");
			}
		</script>
		<script >
			function listeEtudiant2() {
				ajouterEtudiant("ListeEtudiantEnRetard.xml");
			}
		</script>
		<script>
			function afficheEtudiant() {
				
				var tmp = $.parseJSON(localStorage.getItem("students"));
				select = document.getElementById('listB');
				for (i = 1;i<  tmp.length;i++) {
					var option = document.createElement('option');
					option.value = tmp[i].nom+ " " + tmp[i].prenom;
					option.innerHTML = tmp[i].nom+ " " + tmp[i].prenom;
					select.appendChild(option);
				}

			}
		</script>
	</head>

	<body onload="verifier()">

		<div class="bleuePale">

			<div class ="head">

				<nav>
					<a href="Accueil.html" class="accueil">Accueil</a>
				</nav>
				<h1>Programmation Web : INF2005</h1>
				<a href= "javascript:deco();" class="deco">D&eacute;connection</a>

			</div>

			<div class="containLeft">
				<br>
				<div class = "LeftcontainList">
					Page d'acceuil
					<ul>
						<li>
							<a href="Accueil.html" class="a"> INF2005</a>
						</li>
					</ul>
				</div>
				<div class = "LeftcontainList">
					Administration
					<ul>
						<li>
							<a href="" class="a">Notes</a>
						</li>
					</ul>
				</div>
				<div class = "LeftcontainList">
					Activit&eacute;
					<ul>
						<li>
							Ressources
						</li>
						<li>
							Devoirs
						</li>
					</ul>
				</div>

			</div>

			<div class="containCenter">

				<div class="inscriptionEtConnection">
					<div class="inscriptionContain">
						<p class="headParagraph">
							Charger le fichier
						</p>

						<br>
						<form id="formEtudian">
							<div class = "LeftcontainList">
								<a href="javascript:listeEtudiant1();"> Charger les Étudiants</a>
							</div>
							<br>
							<div class = "LeftcontainList">
								<a href="javascript:listeEtudiant2();"> Charger les Étudiants en retard</a>
							</div>

							<br>
							<div class = "LeftcontainList">
								<a href="javascript:afficheEtudiant();"> Afficher les Étudiants </a>
							</div>

							<br>

							<p id ="valide"></p>
						</form>
					</div>
				</div>

				<div class = "inscriptionEtConnection">
					<div class="inscriptionContain">
						<p class="headParagraph">
							Liste
						</p>
						<select name="listB" id="listB" multiple="multiple" class="listeEtudiant">

						</select>
					</div>
				</div>

			</div>

			<div class="containRight">
				<br>
				<div class="LeftcontainList">
					<a href="courriel.html" class="a">Envoyer un courriel au groupe via le forum</a>
				</div>
				<br>
				<div class="LeftcontainList">
					<a href="mailto:christiantelemaque@gmail.com" class="a">Envoyer un courriel</a>
				</div>
				<br>
				<div class="LeftcontainList">
					<a href="Sections.html" class="a">S&eacute;ctions</a>
				</div>
				<br>

			</div>

			<div class="footer">

			</div>

		</div>
	</body>
</html>
